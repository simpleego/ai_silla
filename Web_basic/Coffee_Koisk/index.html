<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>커피 주문기</title>
    <style>
        #container {
            width: 900px;
            height: 900px;
            margin: 0px auto;
            padding: 30px;
            margin-top: 50px;
            border: 10px solid #eee;
        }

        #title {
            position: relative;
            width: 200px;
            height: 50px;
            top: -100px;
            left: 350px;
            border: 5px solid #825b07;
            border-radius: 10px;
            background-color: #b58d08;
            color: white;
            padding: 10px;
            text-align: center;
        }

        #coffees {
            width: 650px;
            margin: 0px auto;
        }

        .coffee {
            width: 150px;
            float: left;
            /* display: inline-block; */
            padding: 10px;
            margin: 20px;
            border: 1px solid #aaa;
            border-radius: 10px;
            background-color: #ddd;
            text-align: center;
        }

        .coffee img {
            border-radius: 10px;
            border: 2px solid #825708;
        }

        #cart {
            clear: both;
            display: none;
        }
    </style>
</head>

<body>
    <div id="container">
        <h1 id="title"> 커피 주문기</h1>
        <div id="coffees">
            <div class="coffee">
                <a href="detail/americano.html">
                    <img src="images/americano.jfif" width="100" height="110">
                </a>
                <p class="coffeeName">아메리카노</p>
                <p>가격 : <span class="price">2,000원</span></p>
                <p>수량 : <span>20개</span></p>
                <button id="btnAmericano">담기</button>
            </div>
            <div class="coffee">
                <a href="detail/latte.html">
                    <img src="images/latte.jfif" width="100" height="110">
                </a>
                <p class="coffeeName">라떼</p>
                <p>가격 : <span class="price">2,500원</span></p>
                <p>수량 : <span>20개</span></p>
                <button id="btnLatte">담기</button>
            </div>
            <div class="coffee">
                <a href="detail/moca.html">
                    <img src="images/moca.jfif" width="100" height="110">
                </a>
                <p class="coffeeName">모카</p>
                <p>가격 : <span class="price">3,000원</span></p>
                <p>수량 : <span>20개</span></p>
                <button id="btnMoka">담기</button>
            </div>
        </div>

        <div id="cart">
            <ul>
                <li>
            
            </li>
        </ul>
        </div>
    </div>


</body>
<script>

    const btnAmericano = document.querySelector("#btnAmericano")
    const btnLatte = document.querySelector("#btnLatte")
    const btnMoka = document.querySelector("#btnMoka")

    // 주문버튼 상태 관리
    btnAmericanoClicked = false;
    btnLatteClicked = false;
    btnMokaClicked = false;

    btnAmericano.addEventListener('click', function (e) {
        orderPreProcess(e);
        if (!btnAmericanoClicked) {
            orderAmericano(e, menu, price)
            btnAmericanoClicked = true;
        } else {
            alert("이미 주문되었습니다 수량조정하세요!!")
        }
    });

    btnLatte.addEventListener('click', function (e) {
        orderPreProcess(e);
        if (!btnLatteClicked) {
            orderLatte(e, menu, price)
            btnLatteClicked = true;
        } else {
            alert("이미 주문되었습니다 수량조정하세요!!")
        }
    });

    btnMoka.addEventListener('click', function (e) {
        orderPreProcess(e);
        if (!btnMokaClicked) {
            orderMoka(e, menu, price)
            btnMokaClicked = true;
        } else {
            alert("이미 주문되었습니다 수량조정하세요!!")
        }
    });

    function orderPreProcess(e) {
        menu = e.target.parentElement.querySelector(".coffeeName").innerHTML;
        price = e.target.parentElement.querySelector(".price").innerHTML;
        price = price.replace(',', '');
        price = price.replace('원', '');
        console.log("menu:" + menu)
        console.log("price:" + price)
    }

    function orderAmericano(e, menu, price) {
        console.log(menu, price)
    }

    item = `
    <span id="menu">${menu}</span>(<span id="price">${price}</span>원)
                수량 : <button id="up" on>+</button>
                <span id="amount">1</span>
                <button id="down">-</button>
                금액 : <input type="text" id="total_price" value="0" readonly>
                <button id="del">취소</button>
    `;

    function orderAmericano() {

        
        up_button = document.querySelector("#up")
        up_button.addEventListener('click', () => {
            // amount 값을 증가
            amount = document.getElementById("amount").innerHTML
            // 수량은 10개 까지 가능하도록 설정하고 안내해 주세요.
            amount++
            if (amount > 10) {
                amount = 10
                alert('수량은 10개 까지 가능합니다.')
            }
            document.getElementById("amount").innerHTML = amount

            total_price = price * amount
            document.getElementById("total_price").value = total_price
        });


        down_button = document.querySelector("#down")
        down_button.addEventListener('click', () => {
            // amount 값을 감소
            amount = document.getElementById("amount").innerHTML
            if (amount != 1) {
                amount--
            } else {
                alert('수량은 최소 1이상 입니다.')
            }

            document.getElementById("amount").innerHTML = amount

            total_price = price * amount
            document.getElementById("total_price").value = total_price
        });

        total_price = price * amount
        document.getElementById("total_price").value = total_price

        console.log(price * amount)

    }


</script>

</html>