<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<style>
 body {
    display: flex;
}

#ancestor, #parent, #child {
  display: flex;
  justify-content: center;
  align-items: center;
}

#ancestor {
  width: 300px;
  height: 300px;
  background-color: green;
}

#parent {
  width: 200px;
  height: 200px;
  background-color: orange;
}

#child {
  width: 100px;
  height: 100px;
  background-color: brown;
}

section {
  margin-left: 20px;
}
</style>
</head>
<body>

    <div id="ancestor">
        <div id="parent">
               <div id="child"></div>
        </div>
    </div>
    <section></section>
</body>
</html>

<script>
const ancestor = document.querySelector("#ancestor")
const parent = document.querySelector("#parent")
const child = document.querySelector("#child")

let count = 1;

ancestor.addEventListener("click", (e) => {
  print('ancestor')
  
}, true)

parent.addEventListener("click", (e) => {
  print('parent')
  e.stopPropagation() // 이벤트 전파 방지
}, true)

child.addEventListener("click", (e) => {
  // e.stopPropagation()
  
  print('child')
}, true)

function print(name) {
  document.querySelector("section")
    .insertAdjacentHTML("beforeend",`<p>${count++}. ${name} clicked</p>`);
}

document.body.addEventListener("click", (e) => {
  [...document.querySelector("section").children].forEach(e => {
    e.remove();
  })
  
  count = 1;
}, true)

</script>